import { LessonActivity, WeekData, MonthData, InstrumentRefData } from '../types';
import { instrumentEncyclopedia, instrumentHistories, instrumentPPTTemplates, instrumentQuizData } from '../data/instruments';

// ⭐️ 어린이 용어 사전 생성
export const getTerms = (instKey: string, week: number) => {
  const instrumentTerms: Record<string, { term: string, desc: string }[]> = {
    "신체 타악기": [
      { term: "바디 퍼커션", desc: "도구 없이 내 몸을 두드려 악기처럼 멋진 소리를 내는 것" },
      { term: "대근육", desc: "팔과 다리처럼 우리 몸의 큰 근육을 씩씩하게 움직이는 것" },
      { term: "심장 박동", desc: "가슴에 손을 대면 느껴지는 '쿵쿵' 뛰는 생명의 리듬" },
      { term: "제스처", desc: "말하지 않고 몸짓으로 내 마음을 표현하는 것" },
      { term: "반사 신경", desc: "신호를 보자마자 번개처럼 빠르게 움직이는 능력" },
      { term: "안전 거리", desc: "친구와 부딪히지 않게 양팔을 벌려 닿지 않는 거리" },
      { term: "공간 지각", desc: "내 몸이 어디에 있는지, 친구와 얼마나 떨어져 있는지 아는 것" }
    ],
    "쉐이커": [
      { term: "쉐이커", desc: "흔들어서 '촥촥' 시원한 파도 소리를 내는 악기" },
      { term: "트레몰로", desc: "악기를 아주 빠르게 흔들어서 '르르르' 떨리는 소리를 내는 것" },
      { term: "마라카스", desc: "손잡이가 달린 쉐이커. 양손에 하나씩 들고 춤추며 연주해요" },
      { term: "씨앗", desc: "쉐이커 안에서 부딪히며 소리를 내는 작은 알갱이들" },
      { term: "악센트", desc: "어느 한 부분만 '강하게' 딱! 힘을 주어 연주하는 것" },
      { term: "그라데이션", desc: "소리가 점점 커지거나 점점 작아지는 것" },
      { term: "회전", desc: "손목을 빙글빙글 돌리며 소리를 부드럽게 만드는 기술" }
    ],
    "우드블록/캐스터네츠": [
      { term: "공명", desc: "악기 속의 빈 공간에서 소리가 '웅~' 하고 울려 퍼지는 것" },
      { term: "우드블록", desc: "나무를 깎아 만든 악기로, 말발굽처럼 '따그닥' 소리가 나요" },
      { term: "마찰", desc: "두 물체를 비벼서 소리를 내는 방법" },
      { term: "캐스터네츠", desc: "조개 모양의 나무 악기. '짝짝' 경쾌한 소리가 나요" },
      { term: "질감", desc: "악기를 만졌을 때 느껴지는 거칠거나 매끄러운 느낌" },
      { term: "스타카토", desc: "공을 튀기듯이 짧고 가볍게 '톡' 끊어서 연주하는 것" },
      { term: "천연 재료", desc: "나무처럼 자연에서 얻은 재료로 만든 것" }
    ],
    "탬버린": [
      { term: "헤드(Head)", desc: "탬버린의 둥근 가죽 부분. 손가락이나 손바닥으로 쳐요" },
      { term: "징글(Jingle)", desc: "탬버린 옆에 달린 짤랑거리는 작은 금속 원반" },
      { term: "흔들기", desc: "손목을 이용해 악기 전체를 움직여 소리 내는 방법" },
      { term: "타격", desc: "주먹이나 손바닥으로 악기를 '쿵' 하고 치는 것" },
      { term: "잔향", desc: "연주를 멈춘 뒤에도 공기 중에 남아있는 은은한 소리" },
      { term: "테두리", desc: "탬버린의 가장자리. 여기를 잡고 연주해요" },
      { term: "그립", desc: "악기를 떨어뜨리지 않게 손으로 꽉 잡는 방법" }
    ],
    "트라이앵글": [
      { term: "뮤트(Mute)", desc: "울리는 소리를 손으로 살짝 잡아 '뚝' 멈추게 하는 기술" },
      { term: "여음", desc: "악기를 친 후에 소리가 사라지지 않고 길게 이어지는 것" },
      { term: "꼭짓점", desc: "세모 모양의 뾰족한 부분. 여기에 끈이 달려 있어요" },
      { term: "비터(채)", desc: "트라이앵글을 치는 쇠막대. 잃어버리지 않게 조심해요" },
      { term: "서스테인", desc: "소리가 길게 쭈욱~ 이어지는 것. 여음과 비슷한 말이에요" },
      { term: "금속", desc: "트라이앵글처럼 반짝이고 단단한 쇠로 만든 재료" },
      { term: "진동", desc: "소리가 날 때 악기가 '르르르' 하고 떨리는 현상" }
    ],
    "라틴 퍼커션": [
      { term: "귀로(Guiro)", desc: "빨래판처럼 올록볼록한 악기. 막대로 '드르륵' 긁어서 연주해요" },
      { term: "카우벨", desc: "원래는 소의 목에 달던 종이었지만, 지금은 멋진 악기가 되었어요" },
      { term: "아고고", desc: "높은 소리와 낮은 소리가 나는 두 개의 종이 연결된 악기" },
      { term: "스크래치", desc: "악기 표면을 긁어서 거친 소리를 내는 연주 방법" },
      { term: "폴리리듬", desc: "서로 다른 리듬이 동시에 어우러져 복잡하고 신나는 소리" },
      { term: "클라베", desc: "라틴 음악의 기본이 되는 '딱, 딱, 딱, 딱딱' 리듬" },
      { term: "정열", desc: "음악을 사랑하는 뜨거운 마음" }
    ],
    "창의 리듬": [
      { term: "업사이클링", desc: "버려지는 물건을 멋진 악기로 다시 태어나게 하는 것" },
      { term: "음색", desc: "사람마다 목소리가 다르듯, 악기마다 가지고 있는 고유한 소리 색깔" },
      { term: "생활 악기", desc: "냄비, 숟가락처럼 우리 주변에서 쉽게 볼 수 있는 물건 악기" },
      { term: "난타", desc: "북이나 물건을 신나게 두드리며 스트레스를 날려버리는 연주" },
      { term: "즉흥", desc: "미리 연습하지 않고 그 자리에서 떠오르는 대로 연주하는 것" },
      { term: "상상력", desc: "머릿속으로 재미있는 생각이나 소리를 그려보는 힘" },
      { term: "발견", desc: "주변에서 새로운 소리를 찾아내는 것" }
    ],
    "북(젬베)": [
      { term: "타점", desc: "좋은 소리를 내기 위해 악기를 쳐야 하는 정확한 위치" },
      { term: "울림통", desc: "북 안의 빈 공간. 여기서 소리가 커져서 밖으로 나와요" },
      { term: "베이스(Bass)", desc: "북의 한가운데를 쳐서 내는 낮고 웅장한 '쿵' 소리" },
      { term: "톤(Tone)", desc: "북의 가장자리를 손가락으로 쳐서 내는 맑은 '탁' 소리" },
      { term: "박동", desc: "심장이 뛰는 것처럼 규칙적으로 쿵쿵거리는 느낌" },
      { term: "두드림", desc: "무언가를 쳐서 소리를 내는 모든 행동" },
      { term: "공명음", desc: "북 속에서 울려서 커지는 소리" }
    ],
    "붐와커": [
      { term: "음계", desc: "도레미파솔라시도~ 소리의 높이가 계단처럼 차례로 있는 것" },
      { term: "피치(Pitch)", desc: "소리의 높고 낮음. 붐와커가 길면 낮은 피치, 짧으면 높은 피치" },
      { term: "튜브", desc: "속이 텅 빈 긴 파이프 모양" },
      { term: "협동", desc: "내가 맡은 음(도)을 친구(솔)와 잘 어울리게 연주하는 것" },
      { term: "멜로디", desc: "음의 높낮이가 있는 노래의 흐름" },
      { term: "반음", desc: "피아노의 검은 건반처럼 음과 음 사이의 소리" },
      { term: "진동관", desc: "소리가 관을 타고 이동하며 울리는 원리" }
    ],
    "핸드벨": [
      { term: "화음", desc: "여러 소리가 동시에 울려서 아름답게 들리는 것 (도+미+솔)" },
      { term: "쉐이크", desc: "핸드벨을 계속 흔들어서 소리가 끊기지 않게 하는 방법" },
      { term: "댐핑", desc: "울리는 종을 몸에 대서 소리를 부드럽게 멈추는 것" },
      { term: "아르페지오", desc: "화음을 한꺼번에 치지 않고 '띠로링~' 펼쳐서 연주하는 것" },
      { term: "터치벨", desc: "흔드는 대신 위를 톡 눌러서 소리 내는 핸드벨의 친구" },
      { term: "집중력", desc: "내 순서가 올 때까지 눈을 크게 뜨고 기다리는 힘" },
      { term: "청아함", desc: "맑고 깨끗한 소리의 느낌" }
    ],
    "전통 타악기": [
      { term: "장단", desc: "우리나라 음악의 고유한 리듬 (덩기덕 쿵 더러러러)" },
      { term: "추임새", desc: "연주하는 친구에게 '얼쑤!', '잘한다!' 하고 응원해주는 말" },
      { term: "구음", desc: "악기 소리를 입으로 흉내 내는 것 (덩, 쿵, 덕)" },
      { term: "신명", desc: "어깨춤이 절로 날 정도로 아주 신나고 즐거운 기분" },
      { term: "채", desc: "장구나 북, 소고를 칠 때 사용하는 나무 막대기" },
      { term: "호흡", desc: "연주하기 전에 다 같이 숨을 들이마시고 맞추는 것" },
      { term: "가락", desc: "우리나라 노래의 멋진 멜로디" }
    ],
    "앙상블": [
      { term: "합주", desc: "여러 친구들이 마음을 모아 동시에 연주하는 것" },
      { term: "파트(Part)", desc: "내가 맡은 역할. 내 소리와 친구 소리가 어울려야 해요" },
      { term: "하모니", desc: "서로 다른 소리가 어울려 아름답게 들리는 것" },
      { term: "솔로(Solo)", desc: "여러 사람 앞에서 혼자서 멋지게 연주하는 것" },
      { term: "지휘", desc: "연주자들이 하나가 되도록 앞에서 신호를 보내주는 역할" },
      { term: "배려", desc: "내 소리가 너무 커서 친구 소리를 방해하지 않게 조절하는 마음" },
      { term: "경청", desc: "내 소리보다 친구의 소리를 더 잘 듣는 것" }
    ]
  };

  const weeklyTerms: Record<number, { term: string, desc: string }[]> = {
    1: [
      { term: "탐색", desc: "악기가 어떤 소리를 내는지 눈과 귀로 자세히 관찰하는 것" },
      { term: "청각", desc: "소리를 듣는 귀의 능력. 음악 대장이 되려면 귀가 밝아야 해요!" },
      { term: "오감", desc: "눈, 코, 입, 귀, 손의 느낌으로 세상을 만나는 방법" },
      { term: "집중", desc: "한 가지 소리에 귀를 쫑긋 세우고 마음을 모으는 것" },
      { term: "호기심", desc: "새로운 악기를 보고 '이건 뭘까?' 하고 궁금해하는 마음" }
    ],
    2: [
      { term: "비트(Beat)", desc: "심장 소리처럼 일정하게 '쿵, 쿵, 쿵' 뛰는 박자" },
      { term: "셈여림", desc: "소리의 크기. 사자처럼 큰 소리(포르테)와 개미처럼 작은 소리(피아노)" },
      { term: "음표", desc: "음악의 길이를 나타내는 기호. (타, 티티)" },
      { term: "템포(Tempo)", desc: "음악의 빠르기. 거북이처럼 느리게, 토끼처럼 빠르게" },
      { term: "쉼표", desc: "소리를 내지 않고 잠깐 쉬는 시간. '쉿!' 하고 기다려요" }
    ],
    3: [
      { term: "즉흥 연주", desc: "정해진 악보 없이 내 기분대로 자유롭게 연주하는 것" },
      { term: "주고받기", desc: "친구가 질문하면 내가 대답하듯이 악기로 대화하는 것" },
      { term: "음의 높낮이", desc: "아빠 목소리(낮은 음)와 아기 목소리(높은 음)의 차이" },
      { term: "감정 표현", desc: "기쁨, 슬픔, 화남 같은 내 마음을 소리로 나타내는 것" },
      { term: "반주", desc: "친구가 노래하거나 연주할 때 배경이 되어주는 소리" }
    ],
    4: [
      { term: "지휘자", desc: "연주자들에게 손짓으로 신호를 보내 음악을 이끄는 대장님" },
      { term: "경청", desc: "내 소리보다 친구의 소리를 더 귀 기울여 듣는 멋진 태도" },
      { term: "피날레", desc: "연주의 가장 마지막 부분. 가장 멋지고 화려하게 끝내요!" },
      { term: "무대 매너", desc: "연주하기 전과 후에 관객에게 멋지게 인사하는 예절" },
      { term: "커튼콜", desc: "공연이 끝나고 박수를 받으며 다시 한번 인사하는 시간" }
    ]
  };

  let selectedTerms = [...(instrumentTerms[instKey] || [])];
  const wTerms = weeklyTerms[week] || [];
  selectedTerms = [...selectedTerms, ...wTerms];

  if (selectedTerms.length < 4) {
    selectedTerms.push({ term: "리듬", desc: "음악의 규칙적인 흐름 (쿵-짝-쿵-짝)" });
    selectedTerms.push({ term: "박자", desc: "음악의 속도를 나타내는 단위" });
  }

  // 더 많은 용어를 보여주기 위해 slice 범위 확대 (12 -> 14)
  return selectedTerms.slice(0, 14);
};

// ⭐️ 4가지 교수법 통합 생성 로직
export const generateIntegratedMain = (week: number, instKey: string, theme: string): LessonActivity[] => {
  const templates: Record<number, LessonActivity[]> = {
    1: [
      {
        title: '활동 1: 오감 만족 탐색 - "악기와 첫 만남"',
        method: '달크로즈 (감각 깨우기), 코다이 (소리 듣기)',
        steps: [
          "'미스터리 박스'에서 악기를 꺼내지 않고 소리만 들려줍니다. (청각 집중)",
          "아이들이 눈을 감고 손으로 악기를 만져보며 모양과 재질을 느낍니다. (촉각)",
          "악기를 꺼내어 자유롭게 소리 내보고, 내 악기에게 어울리는 별명을 지어줍니다."
        ]
      },
      {
        title: '활동 2: 바디 퍼커션 - "내 몸이 악기야"',
        method: '현대적 오르프 (바디 퍼커션 트렌드 반영)',
        steps: [
          "악기를 연주하기 전에 먼저 내 몸으로 리듬을 만들어봅니다.",
          "(발 구르기) 쿵! (허벅지) 탁! (박수) 짝!",
          "교사의 리듬을 따라 하며 신체 감각과 리듬감을 동시에 깨웁니다."
        ]
      },
      {
        title: '활동 3: 즉각 반응 놀이 - "얼음 땡!"',
        method: '달크로즈 (즉흥 반응 Reaction)',
        steps: [
          "피아노(또는 음악) 소리가 나면 자유롭게 돌아다니며 악기를 연주합니다.",
          "소리가 멈추면 그대로 '얼음'이 되어 가장 재미있는 포즈를 취합니다.",
          "층간 소음 걱정 없는 '살금살금 요정 걸음'으로 연주하는 미션을 줍니다."
        ]
      }
    ],
    2: [
      {
        title: '활동 1: 리듬 언어로 말해요 - "타(Ta)와 티티(Ti-ti)"',
        method: '코다이 (리듬 음절 Modern Ver.)',
        steps: [
          "4분 음표(♩)는 '타', 8분 음표(♫)는 '티티'로 약속합니다.",
          "요즘 아이들이 좋아하는 간식 이름으로 리듬을 익힙니다. (예: 젤-리(티티), 빵(타), 초-코-우-유(티티티티))",
          "악기 이름도 리듬 언어로 바꿔서 연주해봅니다."
        ]
      },
      {
        title: '활동 2: 리듬 게임 - "도전! 리듬 히어로"',
        method: '게이미피케이션 (Gamification)',
        steps: [
          "교사가 제시하는 4박자 리듬 카드를 보고 정확하게 연주하면 성공!",
          "1단계(타, 타, 타, 쉼)부터 3단계(티티, 타, 티티, 타)까지 레벨 업 하는 재미를 줍니다.",
          "성공한 친구들에게는 '리듬 히어로' 칭호를 줍니다."
        ]
      },
      {
        title: '활동 3: 셈여림 걷기 - "거인과 생쥐"',
        method: '달크로즈 (뉘앙스 표현)',
        steps: [
          "큰 소리(f)에는 거인처럼 팔을 크게 흔들며 걷습니다.",
          "작은 소리(p)에는 생쥐처럼 발뒤꿈치를 들고 살금살금 걷습니다.",
          "소리의 크기에 따라 즉각적으로 몸의 크기를 바꾸며 다이내믹을 몸으로 익힙니다."
        ]
      }
    ],
    3: [
      {
        title: '활동 1: 음악 동화 - "소리 요정의 모험"',
        method: '달크로즈 (스토리텔링 통합 예술)',
        steps: [
          "교사가 들려주는 이야기에 맞춰 배경음악(BGM)을 연주합니다.",
          '"바람이 불었어요(쉐이커)", "천둥이 쳤어요(큰북)", "비가 그쳤어요(트라이앵글)"',
          "아이들이 직접 이야기 속 효과음 감독이 되어 창의적인 소리를 만듭니다."
        ]
      },
      {
        title: '활동 2: 컵타/도구 놀이 - "리듬 컵 쌓기"',
        method: '현대적 오르프 (컵타 Cup Song 변형)',
        steps: [
          "컵이나 작은 도구를 활용해 리듬에 맞춰 전달하기 놀이를 합니다.",
          "(자신)치고 (옆으로)보내고! 단순한 규칙으로 협동심을 기릅니다.",
          "악기로도 옆 친구에게 소리를 '전달'하는 릴레이 연주를 해봅니다."
        ]
      },
      {
        title: '활동 3: 즉흥 연주 - "묻고 답하기"',
        method: '오르프 (Improvisation)',
        steps: [
          "교사(질문): ♩ ♩ ♩ ? (오늘 기분 어때?)",
          "학생(대답): ♫ ♫ ♩ ! (정말 신-나-요!)",
          "정해진 악보 없이, 지금 느끼는 감정을 리듬으로 자유롭게 표현하게 격려합니다."
        ]
      }
    ],
    4: [
      {
        title: '활동 1: 꼬마 지휘자 - "나를 따르라"',
        method: '달크로즈 (신체 표현과 리드)',
        steps: [
          "친구들 앞에 나와서 지휘자가 되어봅니다.",
          "손을 높이 들면 크게, 낮추면 작게, 주먹을 쥐면 멈춤!",
          "지휘자의 미세한 손짓에 집중하며 '경청'하는 태도를 배웁니다."
        ]
      },
      {
        title: '활동 2: 합주 프로젝트 - "우리끼리 콘서트"',
        method: '오르프 (Ensemble) & 현대적 공유',
        steps: [
          "파트를 나누어(리듬 팀, 효과음 팀, 멜로디 팀) 층을 쌓아 연주합니다.",
          "틀려도 괜찮아요! 서로의 소리를 들으며 하나가 되는 경험이 중요합니다.",
          "연주 모습을 영상으로 짧게 기록하여 아이들에게 보여주고 성취감을 줍니다."
        ]
      },
      {
        title: '활동 3: 커튼콜 - "무대 매너 배우기"',
        method: '통합 예술 (공연 예절)',
        steps: [
          "연주가 끝나면 악기를 내려놓고 관객(친구들)을 향해 멋지게 인사합니다.",
          '관객이 된 친구들은 "브라보!"를 외치며 큰 박수를 쳐줍니다.',
          "연주자와 관객의 역할을 모두 경험하며 성숙한 공연 문화를 익힙니다."
        ]
      }
    ]
  };
  return templates[week] || templates[1];
};

export const generateIntro = (week: number, instKey: string) => {
  switch (week) {
    case 1: return `• [감각 깨우기] "눈을 감고 들어보아요." 악기 소리만 듣고 무엇인지 맞히는 '미스터리 박스' 놀이로 시작합니다.\n• [친해지기] 악기를 조심스럽게 꺼내어 탐색하고, 나만의 악기 이름을 지어줍니다.\n• [약속] "악기는 친구예요." 소중히 다루기로 새끼손가락 걸고 약속합니다.`;
    case 2: return `• [리듬 인사] "안-녕-하-세-요(쿵-쿵-쿵-쿵-쿵)" 말 리듬에 맞춰 씩씩하게 인사합니다.\n• [기억 되살리기] 지난 시간에 배운 악기 이름을 퀴즈로 맞히며 흥미를 유발합니다.\n• [몸 풀기] 달크로즈 유리드믹스: 피아노 소리가 빠르면 빠르게, 느리면 느리게 걷으며 박자감을 익힙니다.`;
    case 3: return `• [스토리텔링] "옛날 옛적에 음악 요정이 살았는데..." 흥미진진한 이야기로 수업 문을 엽니다.\n• [상상하기] "만약 내가 ${instKey}(이)라면 어떻게 춤을 췄을까요?" 몸으로 악기 모양을 흉내 냅니다.\n• [준비] 창의적인 연주를 위해 주변 공간을 넓게 확보하고 안전 거리를 확인합니다.`;
    case 4: return `• [오케스트라 입단] 우리는 꼬마 연주자! 의젓하게 제자리에 앉아 지휘자(선생님)를 바라봅니다.\n• [튜닝 타임] 악기 상태를 점검하고, 다 같이 '하나-둘-셋' 호흡을 맞춰 소리를 내봅니다.\n• [마음 모으기] "우리는 하나!" 구호를 외치며 협동심을 다집니다.`;
    default: return `• [분위기 조성] 반갑게 인사하고 출석을 부릅니다.\n• [동기 유발] ${instKey} 소리를 들려주며 호기심을 자극합니다.\n• [약속] 즐거운 음악 시간을 위해 선생님의 신호(주먹 쥐면 멈춤)를 약속합니다.`;
  }
};

export const generateConclusion = (week: number) => {
  switch (week) {
    case 1: return `• [정리 놀이] "누가 누가 조용히 정리하나~" 노래에 맞춰 악기를 제자리에 정리합니다.\n• [이완] 깊게 숨을 들이마시고 내쉬며 흥분된 마음을 차분하게 가라앉힙니다.\n• [인사] "배꼽 손 인사!" 다음 시간에 또 만나요.`;
    case 2: return `• [리듬 암호] 선생님이 내는 리듬 문제를 맞혀야 교실을 나갈 수 있는 '통행료 게임'을 합니다.\n• [칭찬] 오늘 박자를 가장 잘 맞춘 친구(모두)에게 박수를 보냅니다.\n• [정리] 악기를 정리함에 넣고 줄을 맞춰 섭니다.`;
    case 3: return `• [발표] 오늘 만든 리듬이나 동작을 친구들에게 짧게 보여주는 '미니 쇼'를 가집니다.\n• [격려] 친구의 발표가 끝나면 "정말 멋져!"라고 크게 외쳐줍니다.\n• [기록] 활동지나 스티커 판에 오늘의 기분을 표시합니다.`;
    case 4: return `• [커튼콜] 연주가 끝나면 관객(허공)을 향해 멋지게 인사하는 무대 매너를 배웁니다.\n• [소감 나누기] "오늘 합주 어땠나요?" 뿌듯했던 점을 한 명씩 이야기합니다.\n• [피날레] 다 같이 "두드림 리듬 탐험대, 최고!"를 외치며 힘차게 수업을 마칩니다.`;
    default: return `• [느낌 나누기] 오늘 활동 중 가장 재미있었던 점을 이야기합니다.\n• [칭찬] 질서를 지키며 열심히 참여한 친구들에게 칭찬 도장을 찍어줍니다.\n• [정리] "악기야 잘 자~" 인사하며 악기를 정리함에 넣고 수업을 마칩니다.`;
  }
};

export const getSafetyRule = (week: number, inst: string) => {
  let specificRule = "";
  if (inst.includes("신체")) {
    specificRule = "※ 친구를 밀거나 세게 치지 않고, 내 몸만 두드려요.\n※ 너무 격하게 움직이다 넘어지지 않도록 '안전거리'를 지켜요.";
  } else if (inst.includes("쉐이커")) {
    specificRule = "※ 쉐이커를 입에 넣거나 친구에게 던지지 않아요.\n※ 놓치지 않도록 손잡이나 몸통을 꼭 쥐고 흔들어요.";
  } else if (inst.includes("우드블록") || inst.includes("캐스터네츠")) {
    specificRule = "※ 악기가 딱딱해요. 친구의 머리나 몸을 절대 치지 않아요.\n※ 귀 가까이에서 너무 크게 연주하지 않아요.";
  } else if (inst.includes("탬버린")) {
    specificRule = "※ 탬버린 징글(쇠) 사이에 손가락이 끼지 않도록 조심해요.\n※ 친구 얼굴 앞에서 흔들지 않아요.";
  } else if (inst.includes("트라이앵글")) {
    specificRule = "※ 쇠 막대(채) 끝이 뾰족해요. 눈이나 얼굴을 찌르지 않게 조심해요.\n※ 악기를 떨어뜨려 발을 찧지 않도록 줄을 잘 잡아요.";
  } else if (inst.includes("북") || inst.includes("젬베") || inst.includes("소고")) {
    specificRule = "※ 북 채로 친구를 찌르거나 치지 않아요. (채는 악기만 치는 도구!)\n※ 악기가 무거우니 발등에 떨어뜨리지 않게 조심해서 옮겨요.";
  } else if (inst.includes("붐와커")) {
    specificRule = "※ 붐와커로 친구를 때리거나 칼싸움을 하지 않아요.\n※ 튜브가 찌그러지지 않게 뾰족한 모서리에 치지 않아요.";
  } else if (inst.includes("핸드벨") || inst.includes("터치벨")) {
    specificRule = "※ 핸드벨은 유리가 깨지듯 조심히 다뤄야 해요.\n※ 종 부분을 손으로 만지면 지문이 묻으니 장갑을 껴요.";
  } else {
    specificRule = "※ 악기를 던지거나 입에 넣지 않아요.\n※ 친구와 부딪히지 않도록 자기 자리를 지켜요.";
  }
  return specificRule;
};

export const getTeacherTip = (week: number) => {
  switch (week) {
    case 1: return "처음 악기를 만나는 시간입니다. 탐색 시간을 충분히 주고, '소리'에 집중하도록 유도해주세요.";
    case 2: return "박자감을 익히는 시간입니다. 메트로놈을 활용하거나 선생님이 박수를 쳐서 기준 박을 잡아주세요.";
    case 3: return "창의적인 표현을 격려해주세요. 정답은 없으니 엉뚱한 생각도 칭찬해주면 좋습니다.";
    case 4: return "협동이 중요한 시간입니다. 내 소리보다 친구의 소리를 듣는 '경청'을 강조해주세요.";
    default: return "즐겁고 안전한 수업이 되도록 아이들의 컨디션을 확인해주세요.";
  }
};

export const getMaterials = (week: number, instKey: string) => {
  const common = `${instKey}, 스피커, 음원`;
  switch (week) {
    case 1: return `${common}, 미스터리 박스, 안대(선택)`;
    case 2: return `${common}, 리듬 카드, 메트로놈`;
    case 3: return `${common}, 활동지, 스티커, 색연필`;
    case 4: return `${common}, 지휘봉, 보면대, 촬영용 삼각대`;
    default: return common;
  }
};

export const getLessonSlidePrompts = (weekData: any, monthData: any, instKey: string) => {
  return [
    `슬라이드 1 (표지): 귀여운 ${instKey} 캐릭터와 아이들이 함께 있는 따뜻한 일러스트. 제목 "${weekData.title}" 강조.`,
    `슬라이드 2 (활동1): ${instKey}를 탐색하거나 관찰하는 호기심 가득한 아이들의 모습.`,
    `슬라이드 3 (활동2): 리듬에 맞춰 ${instKey}를 연주하는 신나는 음악 교실 풍경.`,
    `슬라이드 4 (활동3): 친구들과 함께 협동하여 연주하거나 게임하는 모습.`,
    `슬라이드 5 (마무리): "참 잘했어요" 도장과 함께 정리 정돈하는 모습.`
  ];
};

export const getHistorySlidePrompts = (instKey: string) => {
  const data = instrumentPPTTemplates[instKey] || instrumentPPTTemplates["default"];
  return [
    `1. 표지: ${data.slide1.text} / 이미지: ${data.slide1.img}`,
    `2. 기원: ${data.slide2.text} / 이미지: ${data.slide2.img}`,
    `3. 역사: ${data.slide3.text} / 이미지: ${data.slide3.img}`,
    `4. 특징: ${data.slide4.text} / 이미지: ${data.slide4.img}`,
    `5. 재미: ${data.slide5.text} / 이미지: ${data.slide5.img}`
  ];
};

export const getQuizSlidePrompts = (instKey: string) => {
  const quizList = instrumentQuizData[instKey] || instrumentQuizData["default"];
  return quizList.map((q, i) => `퀴즈 ${i+1} (${q.type}): ${q.q} (정답: ${q.a}) / 이미지: ${q.img}`);
};
